---
title: "Oracle Tablo ve Index Yönetimi: İstatistikler, Boyut ve Taşıma"
description: "Veritabanındaki tabloların boyutlarını analiz etme, eksik primary key'leri bulma, istatistik toplama ve objeleri farklı tablespace'lere online taşıma teknikleri."
date: 2026-01-16
category: "Oracle Performans"
tags: ["oracle", "table management", "index", "statistics", "dba", "storage optimization"]
author: "Oracle DBA Blog"
---

# Oracle Tablo ve Index Yönetimi: İstatistikler, Boyut ve Taşıma

Bir veritabanının performansı ve depolama verimliliği, tabloların ve indexlerin ne kadar düzenli yönetildiğine bağlıdır. Bu makalede, bir DBA'nın tablo ve index operasyonlarında en sık ihtiyaç duyduğu analiz ve yönetim scriptlerini bir araya getirdik.


<!--truncate-->
## Tablo Boyut Analizi

Hangi tablonun ne kadar yer kapladığını (LOB'lar dahil) bilmek, kapasite planlaması için şarttır.

### SQL Sorgusu: Şema Bazlı Tablo Boyutları

```sql
SELECT segment_name "Table Name", 
       segment_type "Object Type",
       ROUND(SUM(bytes)/(1024*1024),2) "Size in MB"
FROM dba_segments
WHERE owner = 'APP_USER'
  AND segment_type IN ('TABLE', 'TABLE PARTITION', 'TABLE SUBPARTITION')
GROUP BY segment_name, segment_type
ORDER BY 3 DESC;
```

## Eksik Primary Key Tespiti

Primary key (birincil anahtar) olmayan tablolar, veri bütünlüğü ve performans (özellikle replication ve join işlemlerinde) açısından risk oluşturur.

### SQL Sorgusu: PK Olmayan Tabloları Bulma

```sql
SELECT owner, table_name
FROM dba_tables
WHERE owner NOT IN ('SYS', 'SYSTEM', 'OUTLN', 'DBSNMP')
MINUS
SELECT owner, table_name
FROM dba_constraints
WHERE constraint_type = 'P';
```

## Tablo İstatistiklerinin Yönetimi

Optimizer'ın (CBO) doğru karar verebilmesi için tablo istatistiklerinin güncel olması gerekir.

### İstatistik Toplama (Gelişmiş)

```sql
-- Tek bir tablo için
EXEC DBMS_STATS.GATHER_TABLE_STATS('OWNER', 'TABLE_NAME', cascade => TRUE, method_opt => 'FOR ALL COLUMNS SIZE AUTO');

-- Şema bazlı toplama
EXEC DBMS_STATS.GATHER_SCHEMA_STATS('OWNER');
```

<Callout type="info" title="Locking Statistics">
Eğer bir tablonun istatistiklerinin otomatik job tarafından değişmesini istemiyorsanız, istatistiği kilitleyebilirsiniz:
`EXEC DBMS_STATS.LOCK_TABLE_STATS('OWNER', 'TABLE_NAME');`
</Callout>

## Tablo ve Index Taşıma (Online Reorganization)

Disk alanını boşaltmak veya performansı artırmak için tabloları farklı tablespace'lere taşımak gerekebilir.

### Online Tablo Taşıma (Oracle 12.2+)

```sql
-- Tabloyu online olarak taşıma (Uygulama çalışırken)
ALTER TABLE hr.employees MOVE TABLESPACE data_new ONLINE;
```

### Index Taşıma ve Rebuild

```sql
-- Index taşıma ve rebuild (Online)
ALTER INDEX hr.emp_idx REBUILD TABLESPACE index_new ONLINE;
```

## Yararlı Diğer Sorgular

- **Son DDL Zamanı:** Bir tablonun yapısının en son ne zaman değiştiğini görmek için:
  `SELECT owner, object_name, last_ddl_time FROM dba_objects WHERE object_name = 'TABLE_NAME';`
- **Tabloyu Kullanan Sorgular:** Bir tabloya hangi SQL_ID'lerin eriştiğini AWR üzerinden bulun:
  `SELECT distinct sql_id FROM dba_hist_sql_plan WHERE object_name = 'TABLE_NAME';`

## Sonuç

Tablo ve index yönetimi sadece "oluşturma" aşamasında bitmez. Düzenli istatistik takibi, eksik kısıtlamaların (constraints) giderilmesi ve parçalanmış (fragmented) tabloların online taşınması, veritabanınızın uzun vadeli performansını garanti altına alır.
